{"source":2,"revision":37,"description":null,"createdBy":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"createdOn":"2021-10-13T15:03:40.940Z","modifiedBy":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"modifiedOn":"2022-03-17T17:48:22.613Z","isDeleted":false,"lastRelease":{"id":123,"name":"Release-27","artifacts":[],"_links":{},"description":"","releaseDefinition":{"id":5,"projectReference":null,"_links":{}},"createdOn":"2022-03-17T17:48:27.383Z","createdBy":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"variables":{"Deployment_Bkp":{"value":"/opt/effort4/deploymentbackups/20220317/"},"WAR_FILE_LOCATION":{"value":"/opt/effort4/deploymentuploads/20220316/effort-staging-march-15th.war"}},"variableGroups":[1],"environments":[{"id":12,"name":"PROD-Track","rank":1,"owner":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"id":44},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"id":45}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":62},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":63}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"OneTargetAtATime","tags":["track"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Python Script Module Installation and WAR file updates","refName":null,"workflowTasks":[{"environment":{},"taskId":"e6590a51-c3b6-4b88-99e4-b3498ed7cd5b","version":"1.*","name":"Download GitLab repository","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connection":"3a52f7ce-edab-4ea3-aa73-b39f786249fb","definition":"30121999","versionSelector":"specificVersion","branch":"master","version":"dc747569af4f703345cc3d10fc9699bc61febc04","downloadPath":"$(System.DefaultWorkingDirectory)"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Python module install and Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo apt install -y python3-venv\npython3 -m venv deployment-env\nsource deployment-env/bin/activate\npip install -r requirements.txt","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-Python module install and Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform track --files $(track.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\" ","workingDirectory":"$(System.DefaultWorkingDirectory)","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform track --files $(track.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform track --files $(track.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat4-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat4-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform track --files $(track.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"OneTargetAtATime","tags":["track"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":4,"name":"Deployment","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Stopping Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"echo \"Stopping Tomcat Service\"\n\nsudo /opt/tomcats/tomcat1/bin/shutdown.sh\nsudo /opt/tomcats/tomcat2/bin/shutdown.sh\nsudo /opt/tomcats/tomcat3/bin/shutdown.sh\nsudo /opt/tomcats/tomcat4/bin/shutdown.sh\nsleep 60","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Previous_deployment_bkp","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo mkdir -p \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-Track\"\nsudo cp -r /opt/tomcats/tomcat4/webapps/mobile  \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-Track\"","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# tomcat1\nsudo rm -rf /opt/tomcats/tomcat1/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/mobile /opt/tomcats/tomcat1/webapps/\n\n# tomcat2\nsudo rm -rf /opt/tomcats/tomcat2/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/mobile /opt/tomcats/tomcat2/webapps/\n\n# tomcat3\nsudo rm -rf /opt/tomcats/tomcat3/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/mobile /opt/tomcats/tomcat3/webapps/\n\n# tomcat4\nsudo rm -rf /opt/tomcats/tomcat4/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\"/mobile /opt/tomcats/tomcat4/webapps/","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Starting Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo /opt/tomcats/tomcat1/bin/startup.sh\nsudo /opt/tomcats/tomcat2/bin/startup.sh\nsudo /opt/tomcats/tomcat3/bin/startup.sh\nsudo /opt/tomcats/tomcat4/bin/startup.sh","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"OneTargetAtATime","tags":["track"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":3,"phaseType":4,"name":"Deployment group job","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Cleanup","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo rm -rf /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat\"*","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":123,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/releases/123","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"production"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"True"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/SmartXTechnologies/_apis/public/Release/badge/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/5/12"},{"id":13,"name":"PROD-mobile","rank":2,"owner":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"id":46},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"id":47}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":61},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":64}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["mobile"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Python Script Module Installation and WAR file updates","refName":null,"workflowTasks":[{"environment":{},"taskId":"e6590a51-c3b6-4b88-99e4-b3498ed7cd5b","version":"1.*","name":"Download GitLab repository","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connection":"3a52f7ce-edab-4ea3-aa73-b39f786249fb","definition":"30121999","versionSelector":"specificVersion","branch":"master","version":"dc747569af4f703345cc3d10fc9699bc61febc04","downloadPath":"$(System.DefaultWorkingDirectory)"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Python module install and Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo apt install -y python3-venv\npython3 -m venv deployment-env\nsource deployment-env/bin/activate\npip install -r requirements.txt","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform mobile --files $(spoors.mobile.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\" ","workingDirectory":"$(System.DefaultWorkingDirectory)","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform mobile --files $(spoors.mobile.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform mobile --files $(spoors.mobile.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat4-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\"/mobile\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\"/mobile\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat4-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform mobile --files $(spoors.mobile.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\" \n\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["mobile","sync-1"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":4,"name":"Deployment -Backup","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Previous_deployment_bkp","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo mkdir -p \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-Mobile\"\nsudo cp -r /opt/tomcats/tomcat4/webapps/mobile  \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-Mobile\"","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":50,"deploymentHealthOption":"OneTargetAtATime","tags":["mobile"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":3,"phaseType":4,"name":"Deployment","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Stopping Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"echo \"Stopping Tomcat Service\"\n\nsudo /opt/tomcats/tomcat1/bin/shutdown.sh\nsudo /opt/tomcats/tomcat2/bin/shutdown.sh\n#sudo /opt/tomcats/tomcat3/bin/shutdown.sh\nsudo /opt/tomcats/tomcat4/bin/shutdown.sh\nsleep 60","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# tomcat1\nsudo rm -rf /opt/tomcats/tomcat1/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/mobile /opt/tomcats/tomcat1/webapps/\n\n# tomcat2\nsudo rm -rf /opt/tomcats/tomcat2/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/mobile /opt/tomcats/tomcat2/webapps/\n\n# tomcat3\nsudo rm -rf /opt/tomcats/tomcat3/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/mobile /opt/tomcats/tomcat3/webapps/\n\n# tomcat4\nsudo rm -rf /opt/tomcats/tomcat4/webapps/mobile\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat4\"/mobile /opt/tomcats/tomcat4/webapps/","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Starting Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo /opt/tomcats/tomcat1/bin/startup.sh\nsudo /opt/tomcats/tomcat2/bin/startup.sh\n#sudo /opt/tomcats/tomcat3/bin/startup.sh\nsudo /opt/tomcats/tomcat4/bin/startup.sh","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["mobile"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":4,"phaseType":4,"name":"Deployment Cleanup","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Cleanup","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo rm -rf /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat\"*","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":123,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/releases/123","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"production"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"True"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/SmartXTechnologies/_apis/public/Release/badge/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/5/13"},{"id":14,"name":"PROD-web-xml-update","rank":3,"owner":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"id":48},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"id":49}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":60},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":65}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["web"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Python Script Module Installation and WAR file updates","refName":null,"workflowTasks":[{"environment":{},"taskId":"e6590a51-c3b6-4b88-99e4-b3498ed7cd5b","version":"1.*","name":"Download GitLab repository","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connection":"3a52f7ce-edab-4ea3-aa73-b39f786249fb","definition":"30121999","versionSelector":"specificVersion","branch":"master","version":"dc747569af4f703345cc3d10fc9699bc61febc04","downloadPath":"$(System.DefaultWorkingDirectory)"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Python module install and Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo apt install -y python3-venv\npython3 -m venv deployment-env\nsource deployment-env/bin/activate\npip install -r requirements.txt","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\" ","workingDirectory":"$(System.DefaultWorkingDirectory)","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":123,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/releases/123","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"production"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"True"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/SmartXTechnologies/_apis/public/Release/badge/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/5/14"},{"id":15,"name":"PROD-web1","rank":4,"owner":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"id":70},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"id":72}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":59},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":66}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["web","web-1"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Python Script Module Installation and WAR file updates","refName":null,"workflowTasks":[{"environment":{},"taskId":"e6590a51-c3b6-4b88-99e4-b3498ed7cd5b","version":"1.*","name":"Download GitLab repository","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connection":"c5536882-4f16-4f06-ad3f-776b06cc335f","definition":"149","versionSelector":"specificVersion","branch":"master","version":"886b813e4747a23dafd1962bd07a5df508b050cd","downloadPath":"$(System.DefaultWorkingDirectory)"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Python module install and Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo apt install -y python3-venv\npython3 -m venv deployment-env\nsource deployment-env/bin/activate\npip install -r requirements.txt","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-DirectoryCreation and WAR Deflat","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-Python Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\" ","workingDirectory":"$(System.DefaultWorkingDirectory)","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-DirectoryCreation and WAR Deflat","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-Python Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-DirectoryCreation and WAR Deflat","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-Python Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":50,"deploymentHealthOption":"OneTargetAtATime","tags":["web","web-1"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":4,"name":"Deployment","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Stopping Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"echo \"Stopping Tomcat Service\"\n\nsudo /opt/tomcats/tomcat1/bin/shutdown.sh\nsudo /opt/tomcats/tomcat2/bin/shutdown.sh\nsudo /opt/tomcats/tomcat3/bin/shutdown.sh\nsleep 60","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Previous_deployment_bkp","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo mkdir -p \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-web\"\nsudo cp -r /opt/tomcats/tomcat3/webapps/effortx  \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-web\"","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# tomcat1\nsudo rm -rf /opt/tomcats/tomcat1/webapps/effortx\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx /opt/tomcats/tomcat1/webapps/\n\n# tomcat2\nsudo rm -rf /opt/tomcats/tomcat2/webapps/effortx\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx /opt/tomcats/tomcat2/webapps/\n\n# tomcat3\nsudo rm -rf /opt/tomcats/tomcat3/webapps/effortx\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx /opt/tomcats/tomcat3/webapps/\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Starting Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo /opt/tomcats/tomcat1/bin/startup.sh\nsudo /opt/tomcats/tomcat2/bin/startup.sh\nsudo /opt/tomcats/tomcat3/bin/startup.sh\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Sleep Time - Service start completion","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sleep 300\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["web","web-1"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":3,"phaseType":4,"name":"Deployment group job","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Cleanup","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo rm -rf /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat\"*","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"PROD-web-xml-update","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":123,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/releases/123","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"production"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"True"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/SmartXTechnologies/_apis/public/Release/badge/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/5/15"},{"id":16,"name":"PROD-web3","rank":5,"owner":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"id":71},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"id":73}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":58},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":67}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["web","web-3"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Python Script Module Installation and WAR file updates","refName":null,"workflowTasks":[{"environment":{},"taskId":"e6590a51-c3b6-4b88-99e4-b3498ed7cd5b","version":"1.*","name":"Download GitLab repository","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connection":"c5536882-4f16-4f06-ad3f-776b06cc335f","definition":"149","versionSelector":"specificVersion","branch":"master","version":"886b813e4747a23dafd1962bd07a5df508b050cd","downloadPath":"$(System.DefaultWorkingDirectory)"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Python module install and Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo apt install -y python3-venv\npython3 -m venv deployment-env\nsource deployment-env/bin/activate\npip install -r requirements.txt","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-DirectoryCreation and WAR Deflat","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-Python Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\" ","workingDirectory":"$(System.DefaultWorkingDirectory)","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-DirectoryCreation and WAR Deflat","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-Python Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-DirectoryCreation and WAR Deflat","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-Python Script Execution","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":50,"deploymentHealthOption":"OneTargetAtATime","tags":["web","web-3"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":4,"name":"Deployment","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Stopping Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"echo \"Stopping Tomcat Service\"\n\nsudo /opt/tomcats/tomcat1/bin/shutdown.sh\nsudo /opt/tomcats/tomcat2/bin/shutdown.sh\nsudo /opt/tomcats/tomcat3/bin/shutdown.sh\nsleep 60","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Previous_deployment_bkp","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo mkdir -p \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-web\"\nsudo cp -r /opt/tomcats/tomcat3/webapps/effortx  \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-web\"","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# tomcat1\nsudo rm -rf /opt/tomcats/tomcat1/webapps/effortx\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effortx /opt/tomcats/tomcat1/webapps/\n\n# tomcat2\nsudo rm -rf /opt/tomcats/tomcat2/webapps/effortx\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effortx /opt/tomcats/tomcat2/webapps/\n\n# tomcat3\nsudo rm -rf /opt/tomcats/tomcat3/webapps/effortx\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx /opt/tomcats/tomcat3/webapps/\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Starting Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo /opt/tomcats/tomcat1/bin/startup.sh\nsudo /opt/tomcats/tomcat2/bin/startup.sh\nsudo /opt/tomcats/tomcat3/bin/startup.sh\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Sleep Time - Service start completion","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sleep 300","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["web","web-3"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":3,"phaseType":4,"name":"Deployment group job","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Cleanup","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo rm -rf /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat\"*","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"PROD-web-xml-update","conditionType":2,"value":"4"}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":123,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/releases/123","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"production"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"True"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/SmartXTechnologies/_apis/public/Release/badge/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/5/16"},{"id":17,"name":"PROD-report","rank":6,"owner":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"id":52},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"id":53}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":57},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":68}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["report"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Python Script Module Installation and WAR file updates","refName":null,"workflowTasks":[{"environment":{},"taskId":"e6590a51-c3b6-4b88-99e4-b3498ed7cd5b","version":"1.*","name":"Download GitLab repository","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connection":"3a52f7ce-edab-4ea3-aa73-b39f786249fb","definition":"30121999","versionSelector":"specificVersion","branch":"master","version":"dc747569af4f703345cc3d10fc9699bc61febc04","downloadPath":"$(System.DefaultWorkingDirectory)"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Python module install and Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo  apt install -y python3-pip\nsudo apt install -y python3-venv\npython3 -m venv deployment-env\nsource deployment-env/bin/activate\npip install -r requirements.txt","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat3-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform web --files $(spoors.web.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":50,"deploymentHealthOption":"Custom","tags":["report"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":4,"name":"Deployment","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Stopping Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"echo \"Stopping Tomcat Service\"\n\nsudo /opt/tomcat/bin/shutdown.sh\nsleep 60","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Previous_deployment_bkp","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo mkdir -p \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-report\"\nsudo cp -r /opt/tomcats/tomcat4/webapps/effortx  \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-report\"","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# tomcat3\nsudo rm -rf /opt/tomcat/webapps/effortx\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat3\"/effortx /opt/tomcat/webapps/\n\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Starting Tomcat Service","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo /opt/tomcat/bin/startup.sh\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Sleep Time - Service start completion","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sleep 300","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"Custom","tags":["report"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":3,"phaseType":4,"name":"Deployment group job","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Cleanup","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo rm -rf /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat\"*","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":123,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/releases/123","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"production"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"True"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/SmartXTechnologies/_apis/public/Release/badge/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/5/17"},{"id":18,"name":"PROD-Api","rank":7,"owner":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"variables":{},"variableGroups":[],"preDeployApprovals":{"approvals":[{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Hariram Krishnamoorthy","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/2e33fa52-b16a-4ddf-b378-23376e693543","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"}},"id":"2e33fa52-b16a-4ddf-b378-23376e693543","uniqueName":"hariram.krishnamoorthy@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh","descriptor":"msa.ZjA3YTU4NzEtMDdiMC03N2QzLTg3MDYtZmY5ZjBiZGI4NGVh"},"id":54},{"rank":1,"isAutomated":false,"isNotificationOn":false,"approver":{"displayName":"Dipjyoti Ghosh","url":"https://spsprodsin1.vssps.visualstudio.com/Aad2b4630-efd9-4c79-b4e8-495e67c1e3bc/_apis/Identities/4fc77284-90f5-41f0-8390-9cb7f8b1054e","_links":{"avatar":{"href":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"}},"id":"4fc77284-90f5-41f0-8390-9cb7f8b1054e","uniqueName":"dipjyoti.ghosh@smartxtech.co","imageUrl":"https://dev.azure.com/SmartXTechnologies/_apis/GraphProfile/MemberAvatars/msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx","descriptor":"msa.ZDJkZDIxZWYtOGRhZi03NzkxLWJhNjktYzUzY2U5NWQyNjAx"},"id":55}],"approvalOptions":{"requiredApproverCount":1,"releaseCreatorCanBeApprover":true,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":1}},"deployStep":{"id":56},"postDeployApprovals":{"approvals":[{"rank":1,"isAutomated":true,"isNotificationOn":false,"id":69}],"approvalOptions":{"requiredApproverCount":null,"releaseCreatorCanBeApprover":false,"autoTriggeredAndPreviousEnvironmentApprovedCanBeSkipped":false,"enforceIdentityRevalidation":false,"timeoutInMinutes":0,"executionOrder":2}},"deployPhases":[{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"OneTargetAtATime","tags":["api"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":1,"phaseType":4,"name":"Python Script Module Installation and WAR file updates","refName":null,"workflowTasks":[{"environment":{},"taskId":"e6590a51-c3b6-4b88-99e4-b3498ed7cd5b","version":"1.*","name":"Download GitLab repository","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"connection":"3a52f7ce-edab-4ea3-aa73-b39f786249fb","definition":"30121999","versionSelector":"specificVersion","branch":"master","version":"dc747569af4f703345cc3d10fc9699bc61febc04","downloadPath":"$(System.DefaultWorkingDirectory)"}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Python module install and Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo apt install -y python3-venv\npython3 -m venv deployment-env\nsource deployment-env/bin/activate\npip install -r requirements.txt","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effort6\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effort6\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat1-Python module install and Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform api --files $(spoors.api.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\" ","workingDirectory":"$(System.DefaultWorkingDirectory)","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-DirectoryCreation and WAR Deflat","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"mkdir -p /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effort6\nunzip -qq $(WAR_FILE_LOCATION) -d /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effort6\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Tomcat2-Python Script Execution","refName":"","enabled":true,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"source deployment-env/bin/activate\npython azure_xml_python_script.py --platform api --files $(spoors.api.files) --dir /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\" ","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"OneTargetAtATime","tags":["api"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":2,"phaseType":4,"name":"Deployment","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Stopping Tomcat Service","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"echo \"Stopping Tomcat Service\"\n\nsudo /opt/tomcats/tomcat1/bin/shutdown.sh\nsleep 60\nsudo /opt/tomcats/tomcat2/bin/shutdown.sh\nsleep 60\nsudo pkill -f tomcat1\nsudo pkill -f tomcat2","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Previous_deployment_bkp","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo mkdir -p \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-api-tomcat1\"\nsudo cp -r /opt/tomcats/tomcat1/webapps/effort6  \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-api-tomcat1\"\nsudo mkdir -p \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-api-tomcat2\"\nsudo cp -r /opt/tomcats/tomcat2/webapps/effort_bulk_scheduler \"$(Deployment_Bkp)Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-api-tomcat2\"","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Deploy","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"# tomcat1\nsudo rm -rf /opt/tomcats/tomcat1/webapps/effort6\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat1\"/effort6 /opt/tomcats/tomcat1/webapps/\n\n# tomcat2\nsudo rm -rf /opt/tomcats/tomcat2/webapps/effort_bulk_scheduler\nmv /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effort6 /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effort_bulk_scheduler\nsudo cp -r /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat2\"/effort_bulk_scheduler  /opt/tomcats/tomcat2/webapps/\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}},{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Starting Tomcat Service","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo /opt/tomcats/tomcat1/bin/startup.sh\nsudo /opt/tomcats/tomcat2/bin/startup.sh\n","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]},{"deploymentInput":{"healthPercent":0,"deploymentHealthOption":"OneTargetAtATime","tags":["api"],"skipArtifactsDownload":false,"artifactsDownloadInput":{"downloadInputs":[]},"queueId":20,"demands":[],"enableAccessToken":false,"timeoutInMinutes":0,"jobCancelTimeoutInMinutes":1,"condition":"succeeded()","overrideInputs":{}},"rank":3,"phaseType":4,"name":"Deployment group job","refName":null,"workflowTasks":[{"environment":{},"taskId":"6c731c3c-3c68-459a-a5c9-bde6e6595b5b","version":"3.*","name":"Cleanup","refName":"","enabled":false,"alwaysRun":false,"continueOnError":false,"timeoutInMinutes":0,"retryCountOnTaskFailure":0,"definitionType":"task","overrideInputs":{},"condition":"succeeded()","inputs":{"targetType":"inline","filePath":"","arguments":"","script":"sudo rm -rf /tmp/\"Deployment-$(Release.ReleaseId)-$(Release.AttemptNumber)-tomcat\"*","workingDirectory":"","failOnStderr":"false","bashEnvValue":""}}]}],"environmentOptions":{"emailNotificationType":"OnlyOnFailure","emailRecipients":"release.environment.owner;release.creator","skipArtifactsDownload":false,"timeoutInMinutes":0,"enableAccessToken":false,"publishDeploymentStatus":true,"badgeEnabled":false,"autoLinkWorkItems":false,"pullRequestDeploymentEnabled":false},"demands":[],"conditions":[{"name":"ReleaseStarted","conditionType":1,"value":""}],"executionPolicy":{"concurrencyCount":1,"queueDepthCount":0},"schedules":[],"currentRelease":{"id":123,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/releases/123","_links":{}},"retentionPolicy":{"daysToKeep":30,"releasesToKeep":3,"retainBuild":true},"processParameters":{},"properties":{"BoardsEnvironmentType":{"$type":"System.String","$value":"production"},"LinkBoardsWorkItems":{"$type":"System.String","$value":"True"}},"preDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"postDeploymentGates":{"id":0,"gatesOptions":null,"gates":[]},"environmentTriggers":[],"badgeUrl":"https://vsrm.dev.azure.com/SmartXTechnologies/_apis/public/Release/badge/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/5/18"}],"artifacts":[],"triggers":[],"releaseNameFormat":"Release-$(rev:r)","tags":[],"properties":{"DefinitionCreationSource":{"$type":"System.String","$value":"ReleaseClone"},"IntegrateBoardsWorkItems":{"$type":"System.String","$value":"True"},"IntegrateJiraWorkItems":{"$type":"System.String","$value":"false"}},"id":5,"name":"Spoors-Prod - gitlab","path":"\\PROD","projectReference":null,"url":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/definitions/5","_links":{"self":{"href":"https://vsrm.dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_apis/Release/definitions/5"},"web":{"href":"https://dev.azure.com/SmartXTechnologies/c4142dd5-4c0e-4418-bf43-0e75b2fa240d/_release?definitionId=5"}}}